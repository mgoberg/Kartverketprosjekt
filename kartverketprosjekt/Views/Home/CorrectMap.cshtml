@model kartverketprosjekt.Models.PositionModel

@{
    ViewData["Title"] = "Correction Page";
}

<h2>Korriger ved å trykke i kartet:</h2>

<div id="map"></div>

<form asp-action="CorrectMap" method="post">
    <label for="latitude">Latitude:</label>
    <input type="text" class="form-control" id="latitude" name="Latitude" readonly>
    <label for="longitude">Longitude:</label>
    <input type="text" class="form-control" id="longitude" name="Longitude" readonly>
    <label for="description">Description:</label>
    <textarea class="form-control" id="description" name="description" required></textarea>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>


@section Scripts {
    <script>

        var map = L.map('map').setView([65, 12], 4);

        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '&copy; <a href="http://www.openstreetmap.org/">OpenStreetMap</a>' }).addTo(map);

        map.on('click', function (e) {
            // Get clicked position
            var lat = e.latlng.lat;
            var lng = e.latlng.lng;

            // Remove all previous markers
            map.eachLayer(function (layer) {
                if (layer instanceof L.Marker) {
                    map.removeLayer(layer);
                }
            });

            // Set the latitude and longitude fields in the form
            document.getElementById('latitude').value = lat;
            document.getElementById('longitude').value = lng;

            // Add a marker to the map
            L.marker([lat, lng]).addTo(map);
        });

    </script>
}

